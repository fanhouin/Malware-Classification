import sys
import os
import csv

path = '/home/fan/Desktop/malware_image/binvis_exefile_entropy_multi_py3/'

label = {'Adware': 1, 
        'Backdoor': 2,
        'Ransom' : 3,
        'Trojan' : 4,
        'Worm' : 5,
        'Normal' : 6}

table = [['Name','Adware','Backdoor','Ransom','Trojan','Worm','Normal']]
label_list = ['Adware','Backdoor','Ransom','Trojan','Worm','Normal']

for root, dirs, files in os.walk(path, topdown=False):
    for name in files:
        name_arr = name.split('_')

        row = [name,'0','0','0','0','0','0']
        
        for label_name in name_arr:
            if(label_name in label_list):
                row[label[label_name]] = '1'
        table.append(row)
        
with open('output.csv', 'w', newline='') as csvfile:
    writer = csv.writer(csvfile)
    writer.writerows(table)